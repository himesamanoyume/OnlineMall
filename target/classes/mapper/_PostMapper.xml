<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="design.princessdreamland.onlinemall.mapper._PostMapper">

	<resultMap type="design.princessdreamland.onlinemall.entity._Post" id="_postMap">
		<id property="postId" column="post_id" />

	</resultMap>

<sql id="cols">
	post_id,
	title,
	article,
	introduction,
	publish_time,
	type_id,
	deleted,
	create_user_id,
	create_time,
	update_user_id,
	update_time
</sql>


<sql id="where">
	<where>

		<if test="_post!=null and _post!='' " >
			<if test="_post.postId!=null and _post.postId!='' ">
				AND postId = #{_post.postId}
			</if>
			<if test="_post.title!=null and _post.title!='' ">
				AND title LIKE CONCAT('%',#{_post.title},'%')
			</if>
			<if test="_post.article!=null and _post.article!='' ">
				AND article LIKE CONCAT('%',#{_post.article},'%')
			</if>
			<if test="_post.introduction!=null and _post.introduction!='' ">
				AND introduction LIKE CONCAT('%',#{_post.introduction},'%')
			</if>
			<if test="_post.typeId!=null and _post.typeId!='' ">
				AND type_id = #{_post.typeId}
			</if>
			<if test="_post.publishTime!=null and _post.publishTime!='' ">
				AND _post.publish_time LIKE CONCAT('%',#{_post.publishTime},'%')
			</if>			
		</if>
	
	</where>
</sql>

	<select id="queryPage" resultMap="_postMap" >
		SELECT
		<include refid="cols" />
		FROM post
		<include refid="where" />

		ORDER BY post_id DESC
	</select>



</mapper>







